#!/usr/bin/env python
from PIL import Image
import glob, os, sys, getopt, argparse

parser = argparse.ArgumentParser()

# Create the flags for the script
parser.add_argument('-i', '--imagedir', help='The location of the images to be resized.')
parser.add_argument('-o', '--outputdir', help='The output directory of the resized images.')
parser.add_argument('-s', '--size', help='The width of the image. The height is calculated from that number so only width is needed.', type=int)

# Parse the new flags
args = parser.parse_args()

# Make the output directory
if not os.path.exists(args.outputdir):
	print("Creating output directory: " + args.outputdir)
	os.mkdir(args.outputdir)
else:
	print("Directory: " + args.outputdir + " already exists. Moving on...")

for i in glob.glob(args.imagedir + "/*.jpg"):
	img = Image.open(i)
	height = args.size * img.size[1] / img.size[0]
	name = os.path.basename(i)
	fileType = os.path.splitext(i)[1]
	rsz = img.resize((args.size,height))
	rsz.save(args.outputdir + "/" + name + fileType)
	print(name + " resized...")

print(" ")
print("------------------------------------")
print("Resize completed! :)")
print("------------------------------------")
print(" ")
